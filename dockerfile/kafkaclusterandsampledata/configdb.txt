
docker exec -it dbz_oracle21 sqlplus sys/oraclepw@ORCLCDB as sysdba

SELECT GROUP#, BYTES/1024/1024 SIZE_MB, STATUS FROM V$LOG ORDER BY 1;

SELECT GROUP#, MEMBER FROM V$LOGFILE ORDER BY 1, 2;

ALTER DATABASE CLEAR LOGFILE GROUP 1;
ALTER DATABASE DROP LOGFILE GROUP 1;
ALTER DATABASE ADD LOGFILE GROUP 1 ('/opt/oracle/oradata/ORCLCDB/redo01.log') size 400M REUSE;

ALTER SYSTEM SWITCH LOGFILE;

ALTER DATABASE ADD SUPPLEMENTAL LOG DATA;

CONNECT sys/oraclepw@ORCLCDB as sysdba;
CREATE TABLESPACE logminer_tbs DATAFILE '/opt/oracle/oradata/ORCLCDB/logminer_tbs.dbf'
  SIZE 25M REUSE AUTOEXTEND ON MAXSIZE UNLIMITED;

CONNECT sys/oraclepw@ORCLPDB1 as sysdba;
CREATE TABLESPACE logminer_tbs DATAFILE '/opt/oracle/oradata/ORCLCDB/ORCLPDB1/logminer_tbs.dbf'
  SIZE 25M REUSE AUTOEXTEND ON MAXSIZE UNLIMITED;
  
CONNECT sys/oraclepw@ORCLCDB as sysdba;

CONNECT sys/oraclepw@ORCLCDB as sysdba;

CREATE USER c##dbzuser IDENTIFIED BY dbz DEFAULT TABLESPACE LOGMINER_TBS
  QUOTA UNLIMITED ON LOGMINER_TBS
  CONTAINER=ALL;
  



GRANT CREATE SESSION TO c##dbzuser CONTAINER=ALL;
GRANT SET CONTAINER TO c##dbzuser CONTAINER=ALL;
GRANT SELECT ON V_$DATABASE TO c##dbzuser CONTAINER=ALL;
GRANT FLASHBACK ANY TABLE TO c##dbzuser CONTAINER=ALL;
GRANT SELECT ANY TABLE TO c##dbzuser CONTAINER=ALL;
GRANT SELECT_CATALOG_ROLE TO c##dbzuser CONTAINER=ALL;
GRANT EXECUTE_CATALOG_ROLE TO c##dbzuser CONTAINER=ALL;
GRANT SELECT ANY TRANSACTION TO c##dbzuser CONTAINER=ALL;
GRANT SELECT ANY DICTIONARY TO c##dbzuser CONTAINER=ALL;
GRANT LOGMINING TO c##dbzuser CONTAINER=ALL;

GRANT CREATE TABLE TO c##dbzuser CONTAINER=ALL;
GRANT LOCK ANY TABLE TO c##dbzuser CONTAINER=ALL;
GRANT CREATE SEQUENCE TO c##dbzuser CONTAINER=ALL;

GRANT EXECUTE ON DBMS_LOGMNR TO c##dbzuser CONTAINER=ALL;
GRANT EXECUTE ON DBMS_LOGMNR_D TO c##dbzuser CONTAINER=ALL;

GRANT SELECT ON V_$LOG TO c##dbzuser CONTAINER=ALL;
GRANT SELECT ON V_$LOG_HISTORY TO c##dbzuser CONTAINER=ALL;
GRANT SELECT ON V_$LOGMNR_LOGS TO c##dbzuser CONTAINER=ALL;
GRANT SELECT ON V_$LOGMNR_CONTENTS TO c##dbzuser CONTAINER=ALL;
GRANT SELECT ON V_$LOGMNR_PARAMETERS TO c##dbzuser CONTAINER=ALL;
GRANT SELECT ON V_$LOGFILE TO c##dbzuser CONTAINER=ALL;
GRANT SELECT ON V_$ARCHIVED_LOG TO c##dbzuser CONTAINER=ALL;
GRANT SELECT ON V_$ARCHIVE_DEST_STATUS TO c##dbzuser CONTAINER=ALL;
GRANT SELECT ON V_$TRANSACTION TO c##dbzuser CONTAINER=ALL;

docker exec -it dbz_oracle21 sqlplus c##dbzuser/dbz@ORCLPDB1

CREATE TABLE BANK
   (	"BANK_ID" NUMBER(10,0) NOT NULL ENABLE, 
	"BANK_NAME" VARCHAR2(512), 
	"DESCRIPTION" VARCHAR2(512), 
	"CREATED_ON" DATE, 
	"UPDATED_ON" DATE, 
	"COUNTRY_CODE" VARCHAR2(2) DEFAULT 'ID' NOT NULL ENABLE
   ) ;
COMMIT;

INSERT INTO BANK (BANK_ID,BANK_NAME,DESCRIPTION,CREATED_ON,UPDATED_ON,COUNTRY_CODE) VALUES
	 (78,'Bangkok Bank','Bangkok Bank',TIMESTAMP'2020-05-06 03:49:48.0',NULL,'SG');
INSERT INTO BANK (BANK_ID,BANK_NAME,DESCRIPTION,CREATED_ON,UPDATED_ON,COUNTRY_CODE) VALUES
	 (80,'Bank Al Habib','Bank Al Habib',TIMESTAMP'2020-05-13 09:36:55.0',NULL,'SG');
INSERT INTO BANK (BANK_ID,BANK_NAME,DESCRIPTION,CREATED_ON,UPDATED_ON,COUNTRY_CODE) VALUES
	 (81,'DBS Bank','DBS Bank',TIMESTAMP'2020-05-13 09:37:22.0',NULL,'MY');
INSERT INTO BANK (BANK_ID,BANK_NAME,DESCRIPTION,CREATED_ON,UPDATED_ON,COUNTRY_CODE) VALUES
	 (65,'Hamburger Sparkasse','Hamburger Sparkasse',TIMESTAMP'2019-07-18 10:02:54.0',NULL,'MY');
	 (69,'Metro Bank','Metro Bank',TIMESTAMP'2019-10-08 07:23:44.0',NULL,'MY');
INSERT INTO BANK (BANK_ID,BANK_NAME,DESCRIPTION,CREATED_ON,UPDATED_ON,COUNTRY_CODE) VALUES
	 (70,'Alior Bank Spolka Akcyjna','Alior Bank Spolka Akcyjna',TIMESTAMP'2019-10-09 01:25:21.0',NULL,'MY');
INSERT INTO BANK (BANK_ID,BANK_NAME,DESCRIPTION,CREATED_ON,UPDATED_ON,COUNTRY_CODE) VALUES
	 (71,'Kotak Mahindra Bank Ltd','Kotak Mahindra Bank Ltd',TIMESTAMP'2020-01-16 03:08:21.0',NULL,'MY');
INSERT INTO BANK (BANK_ID,BANK_NAME,DESCRIPTION,CREATED_ON,UPDATED_ON,COUNTRY_CODE) VALUES
	 (89,'Joint Stock Commercial Bank for Foreign Trade of Vietnam','Commonly referred to as Vietcombank',TIMESTAMP'2020-06-29 02:05:38.0',NULL,'MY');
COMMIT;


ALTER TABLE BANK ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS;


